<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="/javascripts/usermanagement.js"></script>
    <script src="/javascripts/landing.js"></script>
    <script src="/javascripts/patient_registration.js"></script>
    <script src="/javascripts/stockmanagement.js"></script>
</head>
<body oncontextmenu="return false;">


<script>

    function logout() {

        var token = user.getCookie("token");

        user.ajaxRequest(user.settings.logoutPath + token, function(result) {

            user.setCookie("token", "", -100);

            user.setCookie("username", "", -100);

            user.setCookie("location", "", -100);

            user.setCookie("attrs", "", -100);

            user.setCookie("gender", "", -100);

            window.location = "/";

        })

    }

    function loadInfo() {

        clearInterval(tmrInterval);

        var done1 = false;
        var done2 = false;

        if(user.$("user")) {

            user.$("user").innerHTML = user.getCookie("username");

            done1 = true;

        }

        if(user.$("location")) {

            user.$("location").innerHTML = user.getCookie("location");

            done2 = true;

        }

        if(!done1 || !done2) {

            tmrInterval = setInterval(function(){

                loadInfo();

            }, 10);

        }
    }

    function submitData(data) {

        landing.submitData(data);

    }

    user.init("/config/user.settings.json");

    landing.init("/config/landing.settings.json");

    patient.init("/config/patient.settings.json", user.getCookie("username"));

    stock.init("/config/stock.settings.json", user.getCookie("username"));

    var tmrInterval = setInterval(function(){

        loadInfo();

    }, 10);

</script>
</body>
</html>